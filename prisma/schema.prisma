generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = [ "public"]
}

model connections {
  id                                   String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  sender_id                            String            @db.Uuid
  receiver_id                          String            @db.Uuid
  status                               connection_status @default(pending)
  message                              String?
  created_at                           DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at                           DateTime?         @default(now()) @db.Timestamptz(6)
  users_connections_receiver_idTousers public_users      @relation("connections_receiver_idTousers", fields: [receiver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_connections_sender_idTousers   public_users      @relation("connections_sender_idTousers", fields: [sender_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model investor_profiles {
  id                   String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id              String       @db.Uuid
  full_name            String
  company_name         String?
  profile_image        String?
  bio                  String?
  location             String?
  investment_range_min Decimal?     @db.Decimal
  investment_range_max Decimal?     @db.Decimal
  industries           String[]
  keywords             String[]
  linkedin_url         String?
  website              String?
  average_rating       Decimal?     @default(0) @db.Decimal
  total_reviews        Int?         @default(0)
  created_at           DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?    @default(now()) @db.Timestamptz(6)
  users                public_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

model reports {
  id                               String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  reporter_id                      String        @db.Uuid
  reported_id                      String        @db.Uuid
  reason                           String
  description                      String?
  status                           report_status @default(pending)
  created_at                       DateTime?     @default(now()) @db.Timestamptz(6)
  users_reports_reported_idTousers public_users  @relation("reports_reported_idTousers", fields: [reported_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_reports_reporter_idTousers public_users  @relation("reports_reporter_idTousers", fields: [reporter_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model reviews {
  id                               String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  reviewer_id                      String       @db.Uuid
  reviewee_id                      String       @db.Uuid
  rating                           Int
  feedback                         String?
  created_at                       DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at                       DateTime?    @default(now()) @db.Timestamptz(6)
  users_reviews_reviewee_idTousers public_users @relation("reviews_reviewee_idTousers", fields: [reviewee_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_reviews_reviewer_idTousers public_users @relation("reviews_reviewer_idTousers", fields: [reviewer_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model startup_profiles {
  id              String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id         String        @db.Uuid
  company_name    String
  logo_url        String?
  tagline         String?
  description     String?
  founding_date   DateTime?     @db.Date
  location        String?
  stage           startup_stage @default(idea)
  funding_goal    Decimal?      @db.Decimal
  current_funding Decimal?      @db.Decimal
  team_size       Int?
  industry        String?
  keywords        String[]
  website         String?
  pitch_deck_url  String?
  average_rating  Decimal?      @default(0) @db.Decimal
  total_reviews   Int?          @default(0)
  created_at      DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?     @default(now()) @db.Timestamptz(6)
  users           public_users  @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

model public_users {
  id                                         String              @id @db.Uuid
  email                                      String              @unique
  user_type                                  user_type
  created_at                                 DateTime?           @default(now()) @db.Timestamp(6)
  last_login                                 DateTime?           @db.Timestamp(6)
  connections_connections_receiver_idTousers connections[]       @relation("connections_receiver_idTousers")
  connections_connections_sender_idTousers   connections[]       @relation("connections_sender_idTousers")
  investor_profiles                          investor_profiles[]
  reports_reports_reported_idTousers         reports[]           @relation("reports_reported_idTousers")
  reports_reports_reporter_idTousers         reports[]           @relation("reports_reporter_idTousers")
  reviews_reviews_reviewee_idTousers         reviews[]           @relation("reviews_reviewee_idTousers")
  reviews_reviews_reviewer_idTousers         reviews[]           @relation("reviews_reviewer_idTousers")
  startup_profiles                           startup_profiles[]
  @@map("users")
  @@schema("public")
}

enum connection_status {
  pending
  accepted
  rejected

  @@schema("public")
}

enum report_status {
  pending
  reviewed
  resolved

  @@schema("public")
}

enum startup_stage {
  idea
  pre_seed  @map("pre-seed")
  seed
  series_a  @map("series-a")
  series_b_ @map("series-b+")

  @@schema("public")
}

enum user_type {
  investor
  startup

  @@schema("public")
}
